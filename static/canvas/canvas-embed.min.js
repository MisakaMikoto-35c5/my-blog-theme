"use strict";var _MathPI=Math.PI;(function(){function a(o){var p=document.createElement("CANVAS");if(p.height=350,p.width=1e3,p.getContext){null==o&&(o="2d");var q=p.getContext(o);return{canvas:p,context:q}}return console.error("Can't get canvas context."),null}function b(){var o={};return new Promise(function(p){e().then(function(r){console.log("Draw start"),o.trusted=r}).then(function(){return o.trusted||console.warn("Canvas fingerprint maybe fake."),f().then(function(r){o.emoji=r}).then(function(){return g().then(function(r){o.magicEmoji=r})}).then(function(){return h().then(function(r){o.draw=r})}).then(function(){return j().then(function(r){o.english=r})}).then(function(){return k().then(function(r){o.specialText=r})}).then(function(){return l().then(function(r){o.chinese=r})}).then(function(){console.log(o),p(o)})})})}function c(){var o=a(),p=null,q=null;if(null!=o){var r=o.context.getExtension("WEBGL_debug_renderer_info");p=o.context.getParameter(r.UNMASKED_VENDOR_WEBGL),q=o.context.getParameter(r.UNMASKED_RENDERER_WEBGL)}b().then(function(s){s.webglVendor=p,s.webglRenderer=q;var t=new XMLHttpRequest;t.open("POST","https://research.wsl.moe/research/data/canvas.php?_t="+Date.now()),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(d(s))})}function d(o){return Object.keys(o).map(function(p){return p+"="+encodeURIComponent(o[p])}).join("&")}function e(){return new Promise(function(o){var q=a();if(null==q)return o(!1),!1;var r=n(0,q.canvas.height-1),s=n(0,q.canvas.width-1);q.context.fillStyle="rgba(0, 0, 0, 255)",q.context.fillRect(s,r,1,1),q.context.fillRect(s+1,r+1,1,1),q.context.fillStyle="rgba(255, 255, 255, 255)",q.context.fillRect(s+1,r,1,1),q.context.fillRect(s,r+1,1,1);for(var v,t=q.context.getImageData(s,r,2,2),u=0;u<t.data.length;u++)switch(v=t.data[u],u){case 0:case 1:case 2:case 12:case 13:case 14:if(0!=v)return o(!1),!1;continue;default:if(255!=v)return o(!1),!1;continue;}return o(!0),!0})}function f(){return new Promise(function(o){var q=a();return null==q?(o(null),null):void(q.context.font="48px sans",q.context.fillStyle="rgba(0, 0, 0, 1)",q.context.fillText("\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08\uD83C\uDFF3\uD83C\uDF08\uD83C\uDDF9\uD83C\uDDFC\uD83C\uDFF3\uFE0F\u200D\u26A7\uFE0F\uD83C\uDDFA\uD83C\uDDF3\xA9#\uFE0F\u20E3\u26E9\uD83E\uDD37\uD83C\uDFFF\u200D\u2640\uFE0F\uD83E\uDDD5\uD83C\uDFFB\uD83E\uDDA8\uD83D\uDFE0\u200B\uFFFF",10,50),o(sha512(q.canvas.toDataURL())))})}function g(){return new Promise(function(o){var q=a();return null==q?(o(null),null):void(q.context.font="48px sans",q.context.fillStyle="rgba(0, 0, 0, 1)",q.context.fillText("\uD83D\uDC83\uD83C\uDFFF\uD83D\uDC69\u200D\uD83D\uDC69\u200D\uD83D\uDC67\uD83D\uDC69\u200D\uD83D\uDC67\u200D\uD83D\uDC67\uD83D\uDC69\u200D\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66",10,50),o(sha512(q.canvas.toDataURL())))})}function h(){return new Promise(function(o){var q=a();return null==q?(o(null),null):void(q.context.fillStyle="rgb(200,0,0)",q.context.fillRect(10,10,55,50),q.context.fillStyle="rgba(0, 0, 200, 0.5)",q.context.fillRect(30,30,55,50),q.context.beginPath(),q.context.arc(75,75,50,0,2*_MathPI,!0),q.context.stroke(),q.context.fill(),q.context.fillStyle="rgba(0, 200, 200, 0.5)",q.context.beginPath(),q.context.arc(0,0,50,0,2*_MathPI,!0),q.context.stroke(),q.context.fill(),q.context.fillStyle="rgba(200, 200, 200, 0.5)",q.context.beginPath(),q.context.arc(50,50,50,0,2*_MathPI,!0),q.context.stroke(),q.context.fill(),o(sha512(q.canvas.toDataURL())))})}function j(){return m("The quick fox jumps over the lazy dog.")}function k(){return m("1234567890/*-+[{|;:'\",./<?(*&^%$#@!`~")}function l(){return m("\u306E\u6211\u80FD\u541E\u4E0B\u73BB\u7483\u800C\u4E0D\u4F24\u8EAB\u4F53\uFF1B\uFF1A\uFF0C\u3002\uFF1F\u3010\u3011\u3001\u201C")}function m(o){return new Promise(function(p){var r=a();return null==r?(p(null),null):void(r.context.fillStyle="rgba(0, 0, 0, 0.5)",r.context.font="48px sans",r.context.fillText(o,5,40),r.context.font="48px serif",r.context.fillText(o,5,60),r.context.font="48px mono",r.context.fillText(o,5,80),r.context.font="48px noto sans",r.context.fillText(o,5,100),r.context.font="48px noto sans cjk",r.context.fillText(o,5,120),r.context.font="48px noto sans cjk sc",r.context.fillText(o,5,140),r.context.font="48px wingdings",r.context.fillText(o,5,160),r.context.font="48px microsoft yahei ui",r.context.fillText(o,5,180),r.context.font="48px comic sans ms",r.context.fillText(o,5,200),r.context.font="48px consolas",r.context.fillText(o,5,220),r.context.font="48px mingliu_hkscs-extb",r.context.fillText(o,5,240),r.context.font="48px emojione color",r.context.fillText(o,5,260),r.context.font="48px \u7B49\u7EBF",r.context.fillText(o,5,280),r.context.font="48px wingdings 2",r.context.fillText(o,5,300),r.context.font="48px source sans",r.context.fillText(o,5,320),r.context.font="48px arial",r.context.fillText(o,5,340),r.context.font="48px simsun",r.context.fillText(o,5,360),p(sha512(r.canvas.toDataURL())))})}function n(o,p){var r=Math.random(),s=o+Math.round(r*(p-o));return s}setTimeout(function(){c()},100)})();